<?php$route = '/metadata';$app->post($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	if(isset($_GET['resource_id'])){ $resource_id = $_GET['resource_id']; } else { $resource_id = '';}	if(isset($_GET['id'])){ $id = $_GET['id']; } else { $id = '';}	if(isset($_GET['last_action_date'])){ $last_action_date = $_GET['last_action_date']; } else { $last_action_date = '';}	if(isset($_GET['last_action_type'])){ $last_action_type = $_GET['last_action_type']; } else { $last_action_type = '';}	if(isset($_GET['field_name'])){ $field_name = $_GET['field_name']; } else { $field_name = '';}	if(isset($_GET['previous_value'])){ $previous_value = $_GET['previous_value']; } else { $previous_value = '';}	if(isset($_GET['replacement_value'])){ $replacement_value = $_GET['replacement_value']; } else { $replacement_value = '';}	if(isset($_GET['updated_by'])){ $updated_by = $_GET['updated_by']; } else { $updated_by = '';}	$slug = PrepareFileName($name);	$Query = "SELECT * FROM metadata WHERE name = '" . $name . "'";	$Database = mysql_query($Query) or die('Query failed: ' . mysql_error());	if($Database && mysql_num_rows($Database))		{		$Link = mysql_fetch_assoc($Database);		$ReturnObject = array();		$ReturnObject['message'] = "Metadata Already Exists!";		$ReturnObject['slug'] = $slug;		}	else		{		$query = "INSERT INTO metadata(";		if(isset($resource_id)){ $query .= $resource_id . ","; }		if(isset($id)){ $query .= $id . ","; }		if(isset($last_action_date)){ $query .= $last_action_date . ","; }		if(isset($last_action_type)){ $query .= $last_action_type . ","; }		if(isset($field_name)){ $query .= $field_name . ","; }		if(isset($previous_value)){ $query .= $previous_value . ","; }		if(isset($replacement_value)){ $query .= $replacement_value . ","; }		if(isset($updated_by)){ $query .= $updated_by . ","; }		$query .= ") VALUES(";		if(isset($resource_id)){ $query .= "'" . mysql_real_escape_string($resource_id) . "',"; }		if(isset($id)){ $query .= "'" . mysql_real_escape_string($id) . "',"; }		if(isset($last_action_date)){ $query .= "'" . mysql_real_escape_string($last_action_date) . "',"; }		if(isset($last_action_type)){ $query .= "'" . mysql_real_escape_string($last_action_type) . "',"; }		if(isset($field_name)){ $query .= "'" . mysql_real_escape_string($field_name) . "',"; }		if(isset($previous_value)){ $query .= "'" . mysql_real_escape_string($previous_value) . "',"; }		if(isset($replacement_value)){ $query .= "'" . mysql_real_escape_string($replacement_value) . "',"; }		if(isset($updated_by)){ $query .= "'" . mysql_real_escape_string($updated_by) . "',"; }		$query .= ")";		mysql_query($query) or die('Query failed: ' . mysql_error());		$ReturnObject = array();		$ReturnObject['message'] = "Metadata Added!";		$ReturnObject['slug'] = $slug;		}	$api->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});?>