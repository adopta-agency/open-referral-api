<?php$route = '/locations/:location_id/services/';$app->get($route, function ($location_id)  use ($app){	$request = $app->request();	$_GET = $request->params();	$ReturnObject = array();		$location_id = filter_var($location_id, FILTER_SANITIZE_STRING);			if(isset($_GET['query'])){ $query = $_GET['query']; } else { $query = '';}	$query = filter_var($query, FILTER_SANITIZE_STRING);		$Query = "SELECT * FROM service s JOIN service_at_location sal ON s.service_id = sal.service_id WHERE sal.location_id = '" . $location_id . "'";	$Query .= " ORDER BY name ASC";	$DatabaseResult = mysql_query($Query) or die('Query failed: ' . mysql_error());	while ($Database = mysql_fetch_assoc($DatabaseResult))		{		$id = $Database['id'];		$organization_id = $Database['organization_id'];		$program_id = $Database['program_id'];		$location_id = $Database['location_id'];		$name = $Database['name'];		$alternate_name = $Database['alternate_name'];		$url = $Database['url'];		$email = $Database['email'];		$status = $Database['status'];		$application_process = $Database['application_process'];		$wait_time = $Database['wait_time'];		$description = $Database['description'];		$F = array();		$F['id'] = $id;		$F['organization_id'] = $organization_id;		$F['program_id'] = $program_id;		$F['location_id'] = $location_id;		$F['name'] = $name;		$F['alternate_name'] = $alternate_name;		$F['url'] = $url;		$F['email'] = $email;		$F['status'] = $status;		$F['application_process'] = $application_process;		$F['wait_time'] = $wait_time;		$F['description'] = $description;		array_push($ReturnObject, $F);		}	$app->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));		});?>