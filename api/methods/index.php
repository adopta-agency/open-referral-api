<?php$route = '/categories';$app->get($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	$ReturnObject = array();	if($query=='')		{		$Query = "SELECT * FROM  WHERE name LIKE '%" . $query . "%'";		}	else		{		$Query = "SELECT * FROM ";		}	$Query .= " ORDER BY name ASC";	$DatabaseResult = mysql_query($Query) or die('Query failed: ' . mysql_error());	while ($Database = mysql_fetch_assoc($DatabaseResult))		{		}	$api->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});$route = '/locations';$app->get($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	if(isset($_GET['page'])){ $page = $_GET['page']; } else { $page = '';}	if(isset($_GET['per_page'])){ $per_page = $_GET['per_page']; } else { $per_page = '';}	$ReturnObject = array();	if($query=='')		{		$Query = "SELECT * FROM  WHERE name LIKE '%" . $query . "%'";		}	else		{		$Query = "SELECT * FROM ";		}	$Query .= " ORDER BY name ASC";	$DatabaseResult = mysql_query($Query) or die('Query failed: ' . mysql_error());	while ($Database = mysql_fetch_assoc($DatabaseResult))		{		}	$api->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});$route = '/locations/:location_id';$app->delete($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	$Query = "DELETE FROM  WHERE slug = '" . $slug . "'";	mysql_query($Query) or die('Query failed: ' . mysql_error());	$ReturnObject = array();	$ReturnObject['message'] = " Deleted!";	$ReturnObject['slug'] = $slug;	$api->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});$route = '/locations/:location_id/mail_address';$app->post($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	if(isset($_GET['address_1'])){ $address_1 = $_GET['address_1']; } else { $address_1 = '';}	if(isset($_GET['address_2'])){ $address_2 = $_GET['address_2']; } else { $address_2 = '';}	if(isset($_GET['attention'])){ $attention = $_GET['attention']; } else { $attention = '';}	if(isset($_GET['city'])){ $city = $_GET['city']; } else { $city = '';}	if(isset($_GET['country'])){ $country = $_GET['country']; } else { $country = '';}	if(isset($_GET['postal_code'])){ $postal_code = $_GET['postal_code']; } else { $postal_code = '';}	if(isset($_GET['state_province'])){ $state_province = $_GET['state_province']; } else { $state_province = '';}	$slug = PrepareFileName($name);	$Query = "SELECT * FROM  WHERE name = '" . $name . "'";	$Database = mysql_query($Query) or die('Query failed: ' . mysql_error());	if($Database && mysql_num_rows($Database))		{		$Link = mysql_fetch_assoc($Database);		$ReturnObject = array();		$ReturnObject['message'] = " Already Exists!";		$ReturnObject['slug'] = $slug;		}	else		{		$query = "INSERT INTO (";		if(isset($address_1)){ $query .= $address_1 . ","; }		if(isset($address_2)){ $query .= $address_2 . ","; }		if(isset($attention)){ $query .= $attention . ","; }		if(isset($city)){ $query .= $city . ","; }		if(isset($country)){ $query .= $country . ","; }		if(isset($location_id)){ $query .= $location_id . ","; }		if(isset($postal_code)){ $query .= $postal_code . ","; }		if(isset($state_province)){ $query .= $state_province . ","; }		$query .= ") VALUES(";		if(isset($address_1)){ $query .= "'" . mysql_real_escape_string($address_1) . "',"; }		if(isset($address_2)){ $query .= "'" . mysql_real_escape_string($address_2) . "',"; }		if(isset($attention)){ $query .= "'" . mysql_real_escape_string($attention) . "',"; }		if(isset($city)){ $query .= "'" . mysql_real_escape_string($city) . "',"; }		if(isset($country)){ $query .= "'" . mysql_real_escape_string($country) . "',"; }		if(isset($location_id)){ $query .= "'" . mysql_real_escape_string($location_id) . "',"; }		if(isset($postal_code)){ $query .= "'" . mysql_real_escape_string($postal_code) . "',"; }		if(isset($state_province)){ $query .= "'" . mysql_real_escape_string($state_province) . "',"; }		$query .= ")";		mysql_query($query) or die('Query failed: ' . mysql_error());		$ReturnObject = array();		$ReturnObject['message'] = " Added!";		$ReturnObject['slug'] = $slug;		}	$api->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});$route = '/locations/:location_id/mail_address/:mail_address_id';$app->delete($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	$Query = "DELETE FROM  WHERE slug = '" . $slug . "'";	mysql_query($Query) or die('Query failed: ' . mysql_error());	$ReturnObject = array();	$ReturnObject['message'] = " Deleted!";	$ReturnObject['slug'] = $slug;	$api->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});$route = '/locations/:location_id/phones';$app->post($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	if(isset($_GET['country_prefix'])){ $country_prefix = $_GET['country_prefix']; } else { $country_prefix = '';}	if(isset($_GET['department'])){ $department = $_GET['department']; } else { $department = '';}	if(isset($_GET['extension'])){ $extension = $_GET['extension']; } else { $extension = '';}	if(isset($_GET['number'])){ $number = $_GET['number']; } else { $number = '';}	if(isset($_GET['number_type'])){ $number_type = $_GET['number_type']; } else { $number_type = '';}	if(isset($_GET['vanity_number'])){ $vanity_number = $_GET['vanity_number']; } else { $vanity_number = '';}	$slug = PrepareFileName($name);	$Query = "SELECT * FROM  WHERE name = '" . $name . "'";	$Database = mysql_query($Query) or die('Query failed: ' . mysql_error());	if($Database && mysql_num_rows($Database))		{		$Link = mysql_fetch_assoc($Database);		$ReturnObject = array();		$ReturnObject['message'] = " Already Exists!";		$ReturnObject['slug'] = $slug;		}	else		{		$query = "INSERT INTO (";		if(isset($country_prefix)){ $query .= $country_prefix . ","; }		if(isset($department)){ $query .= $department . ","; }		if(isset($extension)){ $query .= $extension . ","; }		if(isset($number)){ $query .= $number . ","; }		if(isset($number_type)){ $query .= $number_type . ","; }		if(isset($vanity_number)){ $query .= $vanity_number . ","; }		$query .= ") VALUES(";		if(isset($country_prefix)){ $query .= "'" . mysql_real_escape_string($country_prefix) . "',"; }		if(isset($department)){ $query .= "'" . mysql_real_escape_string($department) . "',"; }		if(isset($extension)){ $query .= "'" . mysql_real_escape_string($extension) . "',"; }		if(isset($number)){ $query .= "'" . mysql_real_escape_string($number) . "',"; }		if(isset($number_type)){ $query .= "'" . mysql_real_escape_string($number_type) . "',"; }		if(isset($vanity_number)){ $query .= "'" . mysql_real_escape_string($vanity_number) . "',"; }		$query .= ")";		mysql_query($query) or die('Query failed: ' . mysql_error());		$ReturnObject = array();		$ReturnObject['message'] = " Added!";		$ReturnObject['slug'] = $slug;		}	$api->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});$route = '/locations/:location_id/phones/:phone_id';$app->delete($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	if(isset($_GET['phone_id'])){ $phone_id = $_GET['phone_id']; } else { $phone_id = '';}	$Query = "DELETE FROM  WHERE slug = '" . $slug . "'";	mysql_query($Query) or die('Query failed: ' . mysql_error());	$ReturnObject = array();	$ReturnObject['message'] = " Deleted!";	$ReturnObject['slug'] = $slug;	$api->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});$route = '/organizations';$app->post($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	if(isset($_GET['accreditations'])){ $accreditations = $_GET['accreditations']; } else { $accreditations = '';}	if(isset($_GET['alternate_name'])){ $alternate_name = $_GET['alternate_name']; } else { $alternate_name = '';}	if(isset($_GET['date_incorporated'])){ $date_incorporated = $_GET['date_incorporated']; } else { $date_incorporated = '';}	if(isset($_GET['description'])){ $description = $_GET['description']; } else { $description = '';}	if(isset($_GET['email'])){ $email = $_GET['email']; } else { $email = '';}	if(isset($_GET['funding_sources'])){ $funding_sources = $_GET['funding_sources']; } else { $funding_sources = '';}	if(isset($_GET['legal_status'])){ $legal_status = $_GET['legal_status']; } else { $legal_status = '';}	if(isset($_GET['licenses'])){ $licenses = $_GET['licenses']; } else { $licenses = '';}	if(isset($_GET['name'])){ $name = $_GET['name']; } else { $name = '';}	if(isset($_GET['tax_id'])){ $tax_id = $_GET['tax_id']; } else { $tax_id = '';}	if(isset($_GET['tax_status'])){ $tax_status = $_GET['tax_status']; } else { $tax_status = '';}	if(isset($_GET['website'])){ $website = $_GET['website']; } else { $website = '';}	$slug = PrepareFileName($name);	$Query = "SELECT * FROM organization WHERE name = '" . $name . "'";	$Database = mysql_query($Query) or die('Query failed: ' . mysql_error());	if($Database && mysql_num_rows($Database))		{		$Link = mysql_fetch_assoc($Database);		$ReturnObject = array();		$ReturnObject['message'] = "Organization Already Exists!";		$ReturnObject['slug'] = $slug;		}	else		{		$query = "INSERT INTO organization(";		if(isset($accreditations)){ $query .= $accreditations . ","; }		if(isset($alternate_name)){ $query .= $alternate_name . ","; }		if(isset($date_incorporated)){ $query .= $date_incorporated . ","; }		if(isset($description)){ $query .= $description . ","; }		if(isset($email)){ $query .= $email . ","; }		if(isset($funding_sources)){ $query .= $funding_sources . ","; }		if(isset($legal_status)){ $query .= $legal_status . ","; }		if(isset($licenses)){ $query .= $licenses . ","; }		if(isset($name)){ $query .= $name . ","; }		if(isset($tax_id)){ $query .= $tax_id . ","; }		if(isset($tax_status)){ $query .= $tax_status . ","; }		if(isset($website)){ $query .= $website . ","; }		$query .= ") VALUES(";		if(isset($accreditations)){ $query .= "'" . mysql_real_escape_string($accreditations) . "',"; }		if(isset($alternate_name)){ $query .= "'" . mysql_real_escape_string($alternate_name) . "',"; }		if(isset($date_incorporated)){ $query .= "'" . mysql_real_escape_string($date_incorporated) . "',"; }		if(isset($description)){ $query .= "'" . mysql_real_escape_string($description) . "',"; }		if(isset($email)){ $query .= "'" . mysql_real_escape_string($email) . "',"; }		if(isset($funding_sources)){ $query .= "'" . mysql_real_escape_string($funding_sources) . "',"; }		if(isset($legal_status)){ $query .= "'" . mysql_real_escape_string($legal_status) . "',"; }		if(isset($licenses)){ $query .= "'" . mysql_real_escape_string($licenses) . "',"; }		if(isset($name)){ $query .= "'" . mysql_real_escape_string($name) . "',"; }		if(isset($tax_id)){ $query .= "'" . mysql_real_escape_string($tax_id) . "',"; }		if(isset($tax_status)){ $query .= "'" . mysql_real_escape_string($tax_status) . "',"; }		if(isset($website)){ $query .= "'" . mysql_real_escape_string($website) . "',"; }		$query .= ")";		mysql_query($query) or die('Query failed: ' . mysql_error());		$ReturnObject = array();		$ReturnObject['message'] = "Organization Added!";		$ReturnObject['slug'] = $slug;		}	$api->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});$route = '/organizations/:organization_id';$app->delete($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	$Query = "DELETE FROM organization WHERE slug = '" . $slug . "'";	mysql_query($Query) or die('Query failed: ' . mysql_error());	$ReturnObject = array();	$ReturnObject['message'] = "Organization Deleted!";	$ReturnObject['slug'] = $slug;	$api->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});$route = '/organizations/:organization_id/locations';$app->post($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	if(isset($_GET['accessibility'])){ $accessibility = $_GET['accessibility']; } else { $accessibility = '';}	if(isset($_GET['address_attributes'])){ $address_attributes = $_GET['address_attributes']; } else { $address_attributes = '';}	if(isset($_GET['admin_emails'])){ $admin_emails = $_GET['admin_emails']; } else { $admin_emails = '';}	if(isset($_GET['alternate_name'])){ $alternate_name = $_GET['alternate_name']; } else { $alternate_name = '';}	if(isset($_GET['description'])){ $description = $_GET['description']; } else { $description = '';}	if(isset($_GET['email'])){ $email = $_GET['email']; } else { $email = '';}	if(isset($_GET['languages'])){ $languages = $_GET['languages']; } else { $languages = '';}	if(isset($_GET['latitude'])){ $latitude = $_GET['latitude']; } else { $latitude = '';}	if(isset($_GET['longitude'])){ $longitude = $_GET['longitude']; } else { $longitude = '';}	if(isset($_GET['name'])){ $name = $_GET['name']; } else { $name = '';}	if(isset($_GET['short_desc'])){ $short_desc = $_GET['short_desc']; } else { $short_desc = '';}	if(isset($_GET['transportation'])){ $transportation = $_GET['transportation']; } else { $transportation = '';}	if(isset($_GET['virtual'])){ $virtual = $_GET['virtual']; } else { $virtual = '';}	if(isset($_GET['website'])){ $website = $_GET['website']; } else { $website = '';}	$slug = PrepareFileName($name);	$Query = "SELECT * FROM  WHERE name = '" . $name . "'";	$Database = mysql_query($Query) or die('Query failed: ' . mysql_error());	if($Database && mysql_num_rows($Database))		{		$Link = mysql_fetch_assoc($Database);		$ReturnObject = array();		$ReturnObject['message'] = " Already Exists!";		$ReturnObject['slug'] = $slug;		}	else		{		$query = "INSERT INTO (";		if(isset($accessibility)){ $query .= $accessibility . ","; }		if(isset($address_attributes)){ $query .= $address_attributes . ","; }		if(isset($admin_emails)){ $query .= $admin_emails . ","; }		if(isset($alternate_name)){ $query .= $alternate_name . ","; }		if(isset($description)){ $query .= $description . ","; }		if(isset($email)){ $query .= $email . ","; }		if(isset($languages)){ $query .= $languages . ","; }		if(isset($latitude)){ $query .= $latitude . ","; }		if(isset($longitude)){ $query .= $longitude . ","; }		if(isset($name)){ $query .= $name . ","; }		if(isset($organization_id)){ $query .= $organization_id . ","; }		if(isset($short_desc)){ $query .= $short_desc . ","; }		if(isset($transportation)){ $query .= $transportation . ","; }		if(isset($virtual)){ $query .= $virtual . ","; }		if(isset($website)){ $query .= $website . ","; }		$query .= ") VALUES(";		if(isset($accessibility)){ $query .= "'" . mysql_real_escape_string($accessibility) . "',"; }		if(isset($address_attributes)){ $query .= "'" . mysql_real_escape_string($address_attributes) . "',"; }		if(isset($admin_emails)){ $query .= "'" . mysql_real_escape_string($admin_emails) . "',"; }		if(isset($alternate_name)){ $query .= "'" . mysql_real_escape_string($alternate_name) . "',"; }		if(isset($description)){ $query .= "'" . mysql_real_escape_string($description) . "',"; }		if(isset($email)){ $query .= "'" . mysql_real_escape_string($email) . "',"; }		if(isset($languages)){ $query .= "'" . mysql_real_escape_string($languages) . "',"; }		if(isset($latitude)){ $query .= "'" . mysql_real_escape_string($latitude) . "',"; }		if(isset($longitude)){ $query .= "'" . mysql_real_escape_string($longitude) . "',"; }		if(isset($name)){ $query .= "'" . mysql_real_escape_string($name) . "',"; }		if(isset($organization_id)){ $query .= "'" . mysql_real_escape_string($organization_id) . "',"; }		if(isset($short_desc)){ $query .= "'" . mysql_real_escape_string($short_desc) . "',"; }		if(isset($transportation)){ $query .= "'" . mysql_real_escape_string($transportation) . "',"; }		if(isset($virtual)){ $query .= "'" . mysql_real_escape_string($virtual) . "',"; }		if(isset($website)){ $query .= "'" . mysql_real_escape_string($website) . "',"; }		$query .= ")";		mysql_query($query) or die('Query failed: ' . mysql_error());		$ReturnObject = array();		$ReturnObject['message'] = " Added!";		$ReturnObject['slug'] = $slug;		}	$api->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});$route = '/search';$app->get($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	if(isset($_GET['category'])){ $category = $_GET['category']; } else { $category = '';}	if(isset($_GET['email'])){ $email = $_GET['email']; } else { $email = '';}	if(isset($_GET['keyword'])){ $keyword = $_GET['keyword']; } else { $keyword = '';}	if(isset($_GET['language'])){ $language = $_GET['language']; } else { $language = '';}	if(isset($_GET['lat_lng'])){ $lat_lng = $_GET['lat_lng']; } else { $lat_lng = '';}	if(isset($_GET['location'])){ $location = $_GET['location']; } else { $location = '';}	if(isset($_GET['org_name'])){ $org_name = $_GET['org_name']; } else { $org_name = '';}	if(isset($_GET['page'])){ $page = $_GET['page']; } else { $page = '';}	if(isset($_GET['per_page'])){ $per_page = $_GET['per_page']; } else { $per_page = '';}	if(isset($_GET['radius'])){ $radius = $_GET['radius']; } else { $radius = '';}	if(isset($_GET['service_area'])){ $service_area = $_GET['service_area']; } else { $service_area = '';}	if(isset($_GET['status'])){ $status = $_GET['status']; } else { $status = '';}	$ReturnObject = array();	if($query=='')		{		$Query = "SELECT * FROM  WHERE name LIKE '%" . $query . "%'";		}	else		{		$Query = "SELECT * FROM ";		}	$Query .= " ORDER BY name ASC";	$DatabaseResult = mysql_query($Query) or die('Query failed: ' . mysql_error());	while ($Database = mysql_fetch_assoc($DatabaseResult))		{		}	$api->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});$route = '/services/:service_id/categories';$app->put($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	if(isset($_GET['taxonomy_ids'])){ $taxonomy_ids = $_GET['taxonomy_ids']; } else { $taxonomy_ids = '';}	$Query = "SELECT * FROM  WHERE slug = '" . $slug . "'";	$Database = mysql_query($Query) or die('Query failed: ' . mysql_error());	if($Database && mysql_num_rows($Database))		{		$query = "UPDATE  SET";		if(isset($service_id))			{			$query .= "service_id='" . mysql_real_escape_string($service_id) . "'";			}		if(isset($taxonomy_ids))			{			$query .= "taxonomy_ids='" . mysql_real_escape_string($taxonomy_ids) . "'";			}		$query .= " WHERE slug = '" . $slug . "'";		mysql_query($query) or die('Query failed: ' . mysql_error());		$ReturnObject = array();		$ReturnObject['message'] = " Updated!";		$ReturnObject['slug'] = $slug;		}	$api->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});?>